# 宿舍维修管理系统需求文档

## 1. 项目概述

### 1.1 项目名称
宿舍维修管理系统 (Dormitory Repair Management System)

### 1.2 项目背景
学校宿舍管理面临维修报修流程复杂、响应缓慢、统计困难等问题。传统的线下报修方式效率低下，缺乏有效的跟踪和管理机制。本系统旨在通过数字化手段，建立完整的宿舍维修管理体系，提高维修效率和服务质量。

### 1.3 项目目标
- 建立统一的宿舍维修报修平台
- 实现维修流程的标准化和透明化
- 提供实时的维修进度跟踪
- 建立完善的数据统计和分析体系
- 提升学生满意度和宿舍管理效率

### 1.4 项目范围
**包含范围：**
- 学生报修申请管理
- 维修工单流程管理
- 学生信息管理
- 宿舍信息管理
- 系统数据统计分析
- 用户权限管理

**不包含范围：**
- 财务结算系统
- 移动端APP
- 短信/邮件通知系统
- 第三方维修公司对接

## 2. 用户角色分析

### 2.1 系统管理员
**职责：**
- 系统配置和维护
- 用户账号管理
- 权限分配
- 数据备份和安全管理

**特权：**
- 访问所有功能模块
- 用户管理权限
- 系统设置权限

### 2.2 宿管员
**职责：**
- 处理学生报修申请
- 分配维修任务
- 跟踪维修进度
- 维修质量验收

**权限：**
- 查看和处理工单
- 管理学生和宿舍信息
- 查看统计报表

### 2.3 学生
**职责：**
- 提交维修申请
- 查看维修进度
- 评价维修服务

**权限：**
- 提交报修工单
- 查看自己的工单状态
- 对完成的工单进行评价

## 3. 功能需求

### 3.1 用户管理模块

#### 3.1.1 用户登录
**功能描述：**
- 支持用户名/密码登录
- 记住登录状态
- 登录失败提示

**输入：**
- 用户名（必填）
- 密码（必填）
- 记住我（可选）

**输出：**
- 登录成功：跳转到仪表盘
- 登录失败：错误提示信息

**业务规则：**
- 用户名和密码不能为空
- 连续登录失败3次后账号锁定5分钟
- 登录状态保持7天

#### 3.1.2 用户信息管理
**功能描述：**
- 查看当前用户信息
- 修改用户密码
- 用户登出

### 3.2 仪表盘模块

#### 3.2.1 数据概览
**功能描述：**
- 显示系统核心统计数据
- 实时数据刷新
- 图表可视化展示

**显示内容：**
- 总工单数
- 待处理工单数
- 已完成工单数
- 在校学生总数
- 宿舍总数

#### 3.2.2 最新工单
**功能描述：**
- 显示最近提交的工单
- 支持快速查看工单详情
- 工单状态实时更新

#### 3.2.3 快速操作
**功能描述：**
- 新建工单快捷入口
- 各管理模块快速导航
- 常用功能快速访问

#### 3.2.4 API连接状态
**功能描述：**
- 实时显示各API模块连接状态
- 支持手动测试连接
- 连接异常警告

### 3.3 工单管理模块

#### 3.3.1 工单列表
**功能描述：**
- 分页显示所有工单
- 支持多条件筛选
- 工单状态批量操作

**筛选条件：**
- 工单状态（待处理/维修中/已完成/已取消）
- 优先级（低/中/高/紧急）
- 故障类型（水电/家具/门窗/网络/其他）
- 学生姓名
- 宿舍楼栋

**列表字段：**
- 工单编号
- 标题
- 故障描述
- 报修学生
- 宿舍位置
- 故障类型
- 优先级
- 状态
- 创建时间
- 操作按钮

#### 3.3.2 工单详情
**功能描述：**
- 查看工单完整信息
- 工单状态流转
- 维修备注记录
- 工单评价

**详情内容：**
- 基本信息（编号、标题、描述）
- 报修人信息
- 宿舍信息
- 故障分类和优先级
- 维修进度记录
- 完成时间和评价

#### 3.3.3 工单操作
**功能描述：**
- 创建新工单
- 编辑工单信息
- 更新工单状态
- 删除工单
- 分配维修员

**状态流转：**
```
待处理 → 维修中 → 已完成
    ↓      ↓
  已取消  已取消
```

#### 3.3.4 工单统计
**功能描述：**
- 工单数量统计
- 状态分布分析
- 故障类型统计
- 处理时间分析

### 3.4 学生管理模块

#### 3.4.1 学生列表
**功能描述：**
- 分页显示学生信息
- 支持搜索和筛选
- 批量操作支持

**筛选条件：**
- 学生姓名/学号
- 所在楼栋
- 是否已分配宿舍

**列表字段：**
- 学号
- 姓名
- 联系电话
- 宿舍信息
- 报修记录统计
- 操作按钮

#### 3.4.2 学生信息管理
**功能描述：**
- 添加新学生
- 编辑学生信息
- 删除学生记录
- 宿舍分配/取消

**学生信息字段：**
- 学号（必填，唯一）
- 姓名（必填）
- 联系电话（必填，手机号格式）
- 分配宿舍（可选）

#### 3.4.3 宿舍分配
**功能描述：**
- 为学生分配宿舍
- 更换学生宿舍
- 取消宿舍分配
- 查看可用宿舍

**业务规则：**
- 每个宿舍最多住4名学生
- 学生只能分配一个宿舍
- 分配前检查宿舍容量

### 3.5 宿舍管理模块

#### 3.5.1 宿舍列表
**功能描述：**
- 卡片式展示宿舍信息
- 支持搜索和筛选
- 宿舍状态可视化

**筛选条件：**
- 楼栋名称
- 楼层
- 房间号

**宿舍信息：**
- 楼栋-房间号
- 楼层信息
- 入住情况（x/4人）
- 报修次数
- 当前状态

#### 3.5.2 宿舍信息管理
**功能描述：**
- 添加新宿舍
- 编辑宿舍信息
- 删除宿舍记录

**宿舍信息字段：**
- 楼栋名称（必填）
- 房间号（必填）
- 楼层（必填，数字）

**业务规则：**
- 楼栋+房间号组合唯一
- 删除前检查是否有学生入住

#### 3.5.3 宿舍状态管理
**状态定义：**
- 正常：无报修，未满员
- 空置：无学生入住
- 满员：入住4名学生
- 超员：入住超过4名学生
- 有待修：存在未完成的报修工单

### 3.6 系统设置模块

#### 3.6.1 基本设置
**功能描述：**
- 系统名称配置
- 联系方式设置
- 公告信息管理

#### 3.6.2 通知设置
**功能描述：**
- 邮件通知开关
- 短信通知开关
- 推送通知设置

#### 3.6.3 工单设置
**功能描述：**
- 工单编号前缀
- 超时提醒时间
- 自动分配规则

## 4. 非功能需求

### 4.1 性能需求
- **响应时间：** 页面加载时间不超过3秒
- **并发用户：** 支持100个并发用户同时在线
- **数据处理：** 单次查询处理1000条记录以内
- **系统可用性：** 99%以上的系统可用时间

### 4.2 安全需求
- **用户认证：** 强制用户登录验证
- **权限控制：** 基于角色的访问控制
- **数据加密：** 敏感数据传输加密
- **输入验证：** 防止SQL注入和XSS攻击

### 4.3 可用性需求
- **界面友好：** 现代化响应式界面设计
- **操作简便：** 主要功能不超过3步完成
- **错误提示：** 清晰的错误信息和操作指导
- **帮助文档：** 完整的用户操作手册

### 4.4 兼容性需求
- **浏览器支持：** Chrome 70+, Firefox 65+, Safari 12+, Edge 79+
- **屏幕分辨率：** 支持1366x768及以上分辨率
- **移动端适配：** 响应式设计支持平板和手机访问

### 4.5 扩展性需求
- **模块化设计：** 支持功能模块独立升级
- **API接口：** 提供标准REST API供第三方集成
- **数据库扩展：** 支持大数据量的横向扩展

## 5. 数据需求

### 5.1 数据实体

#### 5.1.1 用户实体 (User)
```
- id: 用户ID（主键）
- username: 用户名（唯一）
- password: 密码（加密存储）
- email: 邮箱
- first_name: 姓
- last_name: 名
- is_staff: 是否管理员
- is_active: 是否激活
- date_joined: 注册时间
- last_login: 最后登录时间
```

#### 5.1.2 学生实体 (Student)
```
- id: 学生ID（主键）
- user_id: 关联用户ID（外键）
- student_id: 学号（唯一）
- name: 姓名
- phone: 联系电话
- dormitory_id: 宿舍ID（外键，可空）
- created_at: 创建时间
- updated_at: 更新时间
```

#### 5.1.3 宿舍实体 (Dormitory)
```
- id: 宿舍ID（主键）
- building_name: 楼栋名称
- room_number: 房间号
- floor: 楼层
- capacity: 容量（默认4）
- created_at: 创建时间
- updated_at: 更新时间
```

#### 5.1.4 报修工单实体 (RepairOrder)
```
- id: 工单ID（主键）
- order_number: 工单编号（唯一）
- title: 工单标题
- description: 问题描述
- student_id: 报修学生ID（外键）
- dormitory_id: 宿舍ID（外键）
- fault_type: 故障类型（枚举）
- priority: 优先级（枚举）
- status: 工单状态（枚举）
- assigned_to: 分配维修员（外键，可空）
- repair_notes: 维修备注
- completed_at: 完成时间
- rating: 评分（1-5）
- comment: 评价内容
- created_at: 创建时间
- updated_at: 更新时间
```

### 5.2 数据字典

#### 5.2.1 故障类型 (fault_type)
- water: 水电故障
- furniture: 家具损坏
- door_window: 门窗问题
- network: 网络故障
- other: 其他问题

#### 5.2.2 优先级 (priority)
- low: 低
- medium: 中
- high: 高
- urgent: 紧急

#### 5.2.3 工单状态 (status)
- pending: 待处理
- processing: 维修中
- completed: 已完成
- cancelled: 已取消

### 5.3 数据关系
- 用户 1:1 学生
- 宿舍 1:N 学生
- 学生 1:N 报修工单
- 宿舍 1:N 报修工单

## 6. 界面需求

### 6.1 总体设计原则
- **一致性：** 统一的视觉风格和交互方式
- **简洁性：** 界面布局清晰，避免冗余元素
- **易用性：** 符合用户操作习惯，学习成本低
- **响应性：** 支持不同设备和屏幕尺寸

### 6.2 主色调方案
- **主色：** #667eea（蓝紫色）
- **辅助色：** #764ba2（深紫色）
- **成功色：** #2ecc71（绿色）
- **警告色：** #f39c12（橙色）
- **危险色：** #e74c3c（红色）
- **文字色：** #333（深灰色）

### 6.3 布局结构
- **顶部导航：** 系统标题、用户信息、退出按钮
- **侧边菜单：** 功能模块导航，支持折叠
- **内容区域：** 主要功能展示区
- **面包屑：** 显示当前页面位置

### 6.4 组件规范
- **按钮：** 圆角设计，悬浮效果
- **表单：** 清晰的标签和验证提示
- **表格：** 斑马纹效果，排序功能
- **卡片：** 阴影效果，悬浮动画
- **模态框：** 居中显示，背景遮罩

## 7. 技术需求

### 7.1 技术架构
**前端技术栈：**
- Vue 3 + Composition API
- Element Plus UI组件库
- Vue Router 路由管理
- Pinia 状态管理
- Axios HTTP客户端
- ECharts 图表库
- Vite 构建工具

**后端技术栈：**
- Django 5.2.6 Web框架
- Django REST Framework API开发
- MySQL 8.0 数据库
- Python 3.9+
- SimpleUI 管理后台

### 7.2 部署需求
**开发环境：**
- Node.js 16+
- Python 3.9+
- MySQL 8.0+
- Git版本控制

**生产环境：**
- Linux服务器（Ubuntu 20.04+）
- Nginx反向代理
- Gunicorn WSGI服务器
- MySQL主从复制
- Redis缓存

### 7.3 接口规范
- RESTful API设计
- JSON数据格式
- HTTP状态码标准
- 统一错误响应格式
- API版本控制

## 8. 验收标准

### 8.1 功能验收
- [ ] 用户登录/登出功能正常
- [ ] 工单CRUD操作完整
- [ ] 学生信息管理功能正常
- [ ] 宿舍信息管理功能正常
- [ ] 数据统计准确无误
- [ ] 权限控制有效

### 8.2 性能验收
- [ ] 页面加载时间 < 3秒
- [ ] API响应时间 < 1秒
- [ ] 支持100并发用户
- [ ] 系统可用性 > 99%

### 8.3 安全验收
- [ ] 用户身份认证有效
- [ ] 角色权限控制正确
- [ ] 输入数据验证完整
- [ ] 防护SQL注入和XSS攻击

### 8.4 兼容性验收
- [ ] 主流浏览器兼容
- [ ] 响应式设计适配
- [ ] 不同分辨率显示正常

## 9. 风险分析

### 9.1 技术风险
**风险：** 前后端技术栈复杂，团队技能不足
**应对：** 提供技术培训，建立技术文档

**风险：** 数据库性能瓶颈
**应对：** 数据库优化，索引设计，读写分离

### 9.2 业务风险
**风险：** 需求变更频繁
**应对：** 建立需求变更流程，版本控制

**风险：** 用户接受度低
**应对：** 用户培训，界面优化，反馈收集

### 9.3 安全风险
**风险：** 数据泄露和系统攻击
**应对：** 安全编码规范，定期安全检查

## 10. 项目计划

### 10.1 开发阶段
**第1阶段：** 需求分析和系统设计（1周）
**第2阶段：** 数据库设计和API开发（2周）
**第3阶段：** 前端界面开发（2周）
**第4阶段：** 功能联调和测试（1周）
**第5阶段：** 部署上线和用户培训（1周）

### 10.2 里程碑
- [ ] 需求文档完成
- [ ] 技术方案确定
- [ ] 数据库设计完成
- [ ] API接口开发完成
- [ ] 前端页面开发完成
- [ ] 系统集成测试通过
- [ ] 用户验收测试通过
- [ ] 系统正式上线

## 11. 维护支持

### 11.1 系统维护
- 日常系统监控
- 数据备份和恢复
- 性能优化调整
- 安全补丁更新

### 11.2 用户支持
- 用户操作培训
- 技术问题解答
- 功能使用指导
- 反馈意见收集

### 11.3 版本升级
- 功能优化升级
- 新需求开发
- 技术架构升级
- 第三方集成扩展

---

**文档版本：** V1.0
**创建日期：** 2025-09-09
**最后更新：** 2025-09-09
**文档状态：** 正式版